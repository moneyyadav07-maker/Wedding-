<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waifuu Weds Bakaa | Eternal Love</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Poppins:wght@400;600&family=Great+Vibes&display=swap" rel="stylesheet">
    <style>
        :root { --p: #d81b60; --g: #d4af37; --bg: #fff5f7; }
        body { margin: 0; background: var(--bg); font-family: 'Poppins', sans-serif; overflow: hidden; color: #444; }
        .scene { display: none; height: 100vh; width: 100vw; flex-direction: column; align-items: center; justify-content: center; position: absolute; }
        .active { display: flex; animation: fadeIn 0.8s ease; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        /* Card Setup */
        .card-stack { position: relative; width: 350px; height: 500px; }
        .wedding-card { 
            position: absolute; width: 100%; border-radius: 15px; 
            box-shadow: 0 15px 40px rgba(0,0,0,0.2); transition: 1s cubic-bezier(0.4, 0, 0.2, 1);
            border: 5px solid white; cursor: pointer;
        }
        .exit-card { transform: translateX(120%) rotate(20deg); opacity: 0; }

        /* Varmala Stage */
        .game-area { 
            width: 360px; height: 480px; background: url('characters.png') no-repeat center; 
            background-size: contain; border: 3px solid var(--g); border-radius: 20px; position: relative; background-color: #fff;
        }
        .varmala-tool { 
            width: 90px; height: 90px; border: 5px dashed var(--g); border-radius: 50%;
            position: absolute; bottom: 30px; left: 38%; cursor: grab; background: rgba(255,245,247,0.8);
            display: flex; align-items: center; justify-content: center; font-size: 45px; touch-action: none;
            z-index: 100;
        }

        /* Pheras Animation */
        .fire-stage { position: relative; width: 320px; height: 320px; margin: 20px; }
        .fire-img { width: 100px; position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 5; filter: drop-shadow(0 0 10px orange); }
        .walking-chars { 
            width: 120px; position: absolute; top: 0; left: 50%; 
            margin-left: -60px; transition: 2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        /* Flower Shower */
        .petal { 
            position: fixed; background: #ffb7c5; border-radius: 150% 0 150% 150%; 
            z-index: 100; animation: fall linear infinite; 
        }
        @keyframes fall { to { transform: translateY(100vh) rotate(360deg); } }

        /* Dialogues & Buttons */
        .dialogue { 
            background: white; padding: 20px; border-radius: 15px; width: 85%; max-width: 400px;
            margin-top: 20px; border-bottom: 5px solid var(--p); font-weight: 600; font-size: 1.2rem;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        button { 
            padding: 15px 40px; background: var(--p); color: white; border: none; 
            border-radius: 50px; font-weight: bold; font-size: 1.1rem; cursor: pointer; margin-top: 15px;
            box-shadow: 0 5px 15px rgba(216, 27, 96, 0.3);
        }
        button:hover { transform: scale(1.05); }
    </style>
</head>
<body>

    <audio id="bgMusic" loop><source src="shehnai.mp3" type="audio/mpeg"></audio>

    <div id="scene1" class="scene active">
        <h1 style="font-family: 'Great Vibes'; color: var(--p); font-size: 4rem;">For My Waifuu...</h1>
        <div onclick="openEnv()" style="cursor: pointer; font-size: 120px; animation: bounce 2s infinite;">‚úâÔ∏è</div>
        <p style="font-size: 1.3rem;"><b>Baka ki taraf se ek khat! Tap karo...</b></p>
    </div>

    <div id="scene2" class="scene">
        <div class="card-stack">
            <img src="1000009963.png" id="c1" class="wedding-card" onclick="nextCard()" style="z-index:10">
            <img src="1000009964.png" id="c2" class="wedding-card" style="z-index:5">
        </div>
        <div id="card-txt" style="display:none; margin-top:20px;">
            <p style="font-size: 1.6rem; color: var(--p);"><b>I Love You! ‚ù§Ô∏è Ab shadi shuru karein?</b></p>
            <button onclick="startVarmala()">Start Varmala Ceremony üå∏</button>
        </div>
    </div>

    <div id="scene3" class="scene">
        <h2 style="font-family:'Great Vibes'; color:var(--p); font-size: 3rem;">The Varmala Game</h2>
        <div class="game-area">
            <div id="garland" class="varmala-tool">üå∏</div>
        </div>
        <div id="v-dialogue" class="dialogue" style="display:none;"></div>
        <button id="p-btn" style="display:none;" onclick="startPheras()">Ab Phere Lete Hain üî•</button>
    </div>

    <div id="scene4" class="scene">
        <h2 style="font-family:'Great Vibes'; color:var(--p); font-size: 3rem;">The 7 Holy Pheras</h2>
        <div class="fire-stage">
            <img src="https://cdn-icons-png.flaticon.com/512/785/785116.png" class="fire-img">
            <div id="couple" class="walking-chars"><img src="characters.png" style="width:120px;"></div>
        </div>
        <div id="vow-box" class="dialogue">Tayyar ho 7 promises ke liye?</div>
        <button id="vow-btn" onclick="takePhera()">Take Phera 1</button>
    </div>

    <script>
        const music = document.getElementById('bgMusic');
        let pheraCount = 0;
        const promises = [
            "1. Ham dono hamesha aek doosre ko pareshaan krte rhe üòÅüòÅ",
            "2. Tu aise hi mujhe maarte rehü•π",
            "3. Mai bhi teko hamesha kissii kr skunga ab toh üòÅüòÅ‚ù§Ô∏è‚ù§Ô∏è",
            "4. Saare jindagi aek hi bed pe soyenge chipak ke ü´†ü•π",
            "5. Khoob ghoomi ghoomi krenge üò§üíìüíì",
            "6. Saath mai games khelenge üòÅüíì‚ù§Ô∏è",
            "7. Har life mai aap hi mere partner ho ü•πüíì‚ù§Ô∏è"
        ];

        function openEnv() { music.play(); showScene('scene2'); }
        
        function nextCard() { 
            document.getElementById('c1').classList.add('exit-card'); 
            setTimeout(() => { document.getElementById('card-txt').style.display = 'block'; }, 800);
        }

        function startVarmala() { showScene('scene3'); initDrag(); }

        function showScene(id) {
            document.querySelectorAll('.scene').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        function initDrag() {
            const v = document.getElementById('garland');
            const move = (e) => {
                let x = e.type.includes('touch') ? e.touches[0].pageX : e.pageX;
                let y = e.type.includes('touch') ? e.touches[0].pageY : e.pageY;
                v.style.left = (x - 45) + 'px'; v.style.top = (y - 45) + 'px';
            };
            v.addEventListener('mousedown', () => window.addEventListener('mousemove', move));
            v.addEventListener('touchstart', () => window.addEventListener('touchmove', move));
            window.addEventListener('mouseup', () => {
                window.removeEventListener('mousemove', move);
                // Adjusting drop zone for Baka's neck
                if(parseInt(v.style.top) < 280) { 
                    v.style.top="130px"; v.style.left="85px"; finishV(); 
                }
            });
        }

        function finishV() {
            const d = document.getElementById('v-dialogue'); d.style.display = 'block';
            d.innerHTML = "<b>Baka:</b> Arreee ab kya saari umar iske saath katne padege? üò∞";
            setTimeout(() => {
                d.innerHTML = "<b>Waifu:</b> Tere andar himmat hai mujhse door jaane ki? Chup-chaap mera banja ab! üò§üíñ";
                document.getElementById('p-btn').style.display = 'block';
            }, 3000);
        }

        function startPheras() { showScene('scene4'); setInterval(createPetal, 300); }

        function createPetal() {
            const p = document.createElement('div'); p.className = 'petal';
            p.style.left = Math.random() * 100 + 'vw'; p.style.width = p.style.height = (Math.random() * 15 + 8) + 'px';
            p.style.animationDuration = (Math.random() * 3 + 2) + 's';
            document.body.appendChild(p); setTimeout(() => p.remove(), 5000);
        }

        function takePhera() {
            if(pheraCount < 7) {
                const angle = (pheraCount + 1) * (360 / 7);
                // Character rotates around the fire
                document.getElementById('couple').style.transformOrigin = "50% 160px";
                document.getElementById('couple').style.transform = `rotate(${angle}deg)`;
                
                document.getElementById('vow-box').innerHTML = promises[pheraCount];
                pheraCount++;
                document.getElementById('vow-btn').innerHTML = pheraCount < 7 ? `Take Phera ${pheraCount+1}` : "Happily Married! ‚ù§Ô∏èüíç";
            } else {
                document.getElementById('vow-box').innerHTML = "<h3 style='color:var(--p)'>Mubarak Ho! ‚ù§Ô∏è</h3>Humari digital shadi sampann hui. Tum sirf meri ho ab! ü•∞";
                document.getElementById('vow-btn').style.display = 'none';
            }
        }
    </script>
</body>
</html>
