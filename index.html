<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Waifuu Weds Bakaa ‚ù§Ô∏è</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&display=swap');
        
        body { margin: 0; background: #fff5f8; font-family: 'Arial', sans-serif; overflow-x: hidden; }
        .scene { display: none; height: 100vh; width: 100vw; flex-direction: column; align-items: center; justify-content: center; text-align: center; }
        .active { display: flex; }

        /* Envelope Styles */
        .envelope { width: 280px; height: 180px; background: #ff4d6d; position: relative; cursor: pointer; border-radius: 0 0 10px 10px; box-shadow: 0 10px 20px rgba(0,0,0,0.2); margin-top: 50px; }
        .flap { position: absolute; top: 0; width: 0; height: 0; border-left: 140px solid transparent; border-right: 140px solid transparent; border-top: 90px solid #c9184a; transform-origin: top; transition: 0.6s; z-index: 2; }
        .open .flap { transform: rotateX(180deg); }

        /* Card Styles */
        .card-stack { position: relative; width: 300px; height: 400px; }
        .wedding-card { position: absolute; width: 100%; border-radius: 15px; box-shadow: 0 10px 25px rgba(0,0,0,0.2); transition: 0.8s ease-in-out; cursor: pointer; }
        .exit-card { transform: translateY(-120%) rotate(-15deg); opacity: 0; }

        /* Varmala Game Styles */
        .game-area { position: relative; width: 350px; height: 450px; background: url('characters.png') no-repeat center; background-size: contain; margin-top: 10px; }
        .garland { width: 70px; cursor: grab; position: absolute; bottom: 10px; left: 40%; z-index: 10; touch-action: none; }
        .dialogue-box { background: white; padding: 15px; border-radius: 15px; margin-top: 15px; border: 2px solid #ff4d6d; font-weight: bold; min-width: 250px; }

        /* Phera Styles */
        .fire { width: 100px; animation: flicker 0.1s infinite alternate; }
        @keyframes flicker { from { transform: scale(1); } to { transform: scale(1.1); } }
        .vow-text { font-family: 'Dancing Script', cursive; font-size: 24px; color: #c9184a; margin-top: 20px; }

        button { padding: 12px 25px; background: #ff4d6d; color: white; border: none; border-radius: 25px; font-weight: bold; cursor: pointer; margin-top: 20px; }
    </style>
</head>
<body>

    <audio id="bgMusic" loop><source src="shehnai.mp3" type="audio/mpeg"></audio>

    <div id="scene1" class="scene active">
        <h1 style="color: #c9184a; font-family: 'Dancing Script';">A special letter for you...</h1>
        <div class="envelope" id="envelope" onclick="openLetter()">
            <div class="flap"></div>
        </div>
    </div>

    <div id="scene2" class="scene">
        <div class="card-stack">
            <img src="1000009963.png" id="congrats" class="wedding-card" onclick="discardCongrats()" style="z-index: 2;">
            <img src="1000009964.png" id="main-invite" class="wedding-card" style="z-index: 1;">
        </div>
        <div id="invite-msg" style="display:none; padding: 20px;">
            <p>After being together for so many years, we are going to marry today. Happy marriage my dear ‚ù§Ô∏èüíì</p>
            <button onclick="startVarmala()">Let's Get Married!</button>
        </div>
    </div>

    <div id="scene3" class="scene">
        <h2 style="color: #ff4d6d;">Drag the Varmala to Baka! üå∏</h2>
        <div class="game-area" id="gameArea">
            <img src="https://cdn-icons-png.flaticon.com/512/1047/1047640.png" id="varmala" class="garland">
        </div>
        <div id="dialogue" class="dialogue-box" style="display:none;"></div>
        <button id="btn-phera" style="display:none;" onclick="startPheras()">Chalo Ab Phere Lete Hain üî•</button>
    </div>

    <div id="scene4" class="scene">
        <img src="https://cdn-icons-png.flaticon.com/512/785/785116.png" class="fire">
        <div id="vow-container" class="vow-text">Ready for the 7 promises?</div>
        <button id="phera-button" onclick="nextPhera()">Take Phera 1</button>
    </div>

    <script>
        const music = document.getElementById('bgMusic');
        let currentPhera = 0;
        const vows = [
            "1. I promise to always be your Baka.",
            "2. I promise to handle all your mood swings.",
            "3. I promise to always keep you happy.",
            "4. I promise to never let you go.",
            "5. I promise to be your best friend forever.",
            "6. I promise to share my food (maybe!).",
            "7. I promise to love you till the end. ‚ù§Ô∏è"
        ];

        function openLetter() {
            document.getElementById('envelope').classList.add('open');
            music.play();
            setTimeout(() => { showScene('scene2'); }, 1000);
        }

        function discardCongrats() {
            document.getElementById('congrats').classList.add('exit-card');
            setTimeout(() => { document.getElementById('invite-msg').style.display = 'block'; }, 600);
        }

        function startVarmala() { showScene('scene3'); }

        function showScene(id) {
            document.querySelectorAll('.scene').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        // Varmala Drag Logic
        const v = document.getElementById('varmala');
        v.onmousedown = v.ontouchstart = function(e) {
            let moveEvent = e.type === 'touchstart' ? 'touchmove' : 'mousemove';
            let upEvent = e.type === 'touchstart' ? 'touchend' : 'mouseup';
            
            document.onmousemove = document.ontouchmove = function(ev) {
                let clientX = ev.type === 'touchmove' ? ev.touches[0].pageX : ev.pageX;
                let clientY = ev.type === 'touchmove' ? ev.touches[0].pageY : ev.pageY;
                v.style.left = (clientX - 35) + 'px';
                v.style.top = (clientY - 35) + 'px';
            };
            
            document.onmouseup = document.ontouchend = function() {
                document.onmousemove = document.ontouchmove = null;
                if(parseInt(v.style.top) < 300) { 
                    v.style.top = "150px"; v.style.left = "90px"; // Lock to neck
                    finishVarmala();
                }
            };
        };

        function finishVarmala() {
            const d = document.getElementById('dialogue');
            d.style.display = 'block';
            d.innerHTML = "Baka: Arreee ye kaha fass gaya maii! üò∞";
            setTimeout(() => {
                d.innerHTML = "Waifuu: Chhup chaap mera banja ab! üíñ";
                document.getElementById('btn-phera').style.display = 'block';
            }, 2000);
        }

        function startPheras() { showScene('scene4'); }

        function nextPhera() {
            if(currentPhera < 7) {
                document.getElementById('vow-container').innerHTML = vows[currentPhera];
                currentPhera++;
                document.getElementById('phera-button').innerHTML = currentPhera < 7 ? `Take Phera ${currentPhera + 1}` : "Happily Married! ‚ù§Ô∏è";
            } else {
                alert("Happy Married Life, Baka and Waifuu!");
            }
        }
    </script>
</body>
</html>

